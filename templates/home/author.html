{% extends "home/base.html" %}

{% block head %}
{% endblock %}


{% block js %}



	$("#more").hide();
	$("#more_link").click(function(){$("#more").toggle()})

	function toggle_wordcloud(suffix) {
		$(".yeartab").removeClass("selected");
		$(".wordcloud").hide()		
		$("#yeartab" + suffix).addClass("selected");
		$("#wordcloud" + suffix).show()		
	}

	var yearbar = $("#yearbar");
	
	$("<div class='yeartab' id='yeartaball'>All Years</a>").click(function() {
		toggle_wordcloud("all");
	}).appendTo(yearbar);

	{% for year in wordyears %}
	$("<div class='yeartab' id='yeartab{{year}}'>{{year}}</a>").click(function() {
		toggle_wordcloud("{{year}}");
	}).appendTo(yearbar);
	{% endfor %}
	
	
	$("#yeartaball").click();

{% endblock %}

{% block css %}
	table {float:none;}
{% endblock %}

{% block content %}

<h1 >What's hot with {{author.name}}?</h1>



<h2>Publications overall</h2>
<table>
	<tr>
		<td><span class='spark'>
			{% for v in overallcounts %}
				{{v}}
				{%if not forloop.last%},{%endif%}
			{% endfor%}
		</span></td>
		<td >over all venues</td>	
	</tr>
</table>

<h2>Publications per year by venue</h2>
<div>
<table>
	
{% for k,vs in counts %}
<tr>
	<td><span class='spark'>
		{% for v in vs %}
			{{v}}
			{%if not forloop.last%},{%endif%}
		{% endfor%}
	</span></td>
	<td ><a class="link" href="/conference/{{k}}/">{{k}}</a></td>	
</tr>

{% if forloop.counter == 10 %}
</table>
<div><span class="link" id="more_link">show {{ counts|length|add:"-10"}} more</span></div>
<table id="more" >
{% endif %}


{% endfor %}
</table>
<div style='clear:both'/>
</div>



<h2>Favorite Terms</h2>

	<div id="yearbar" style="float:left; display: none;"></div>
	<div id="yearwordcloud" style="float:left">
		<table class="wordcloud" id="wordcloudall" style="display:none; float:none;">
			{% for word, count, size in allwords %}
			<tr><td>{{count}}</td><td><span style="font-size:{{size}}pt;">{{word}}</span></td></tr>
			{% endfor %}
		</table>		
		
		{% for year, words in wordyears.items %}
		<table class="wordcloud" id="wordcloud{{year}}" style="display:none;">
			{% for word, pair in words.items %}
			<tr><td>{{pair.0}}</td><td><span style="font-size:{{pair.1}}pt;">{{word}}</span></td></tr>
			{% endfor %}
		</table>
		{% endfor %}
	</div>
	<div style="clear:both"/>




<h2>Trends for top terms over publication history</h2>
	{% include 'home/test.html' %}
	<div style="clear:both"/>
{% endblock %}
